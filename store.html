<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Delight Dental Care - Store</title>
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
      color: #333;
    }

    nav {
      background: #00796b;
      color: white;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 20px;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    nav .brand {
      display: flex;
      align-items: center;
    }
    nav .brand img {
      height: 45px;
      margin-right: 10px;
    }
    nav .brand h1 {
      font-size: 1.2rem;
      margin: 0;
    }
    nav ul {
      list-style: none;
      display: flex;
      margin: 0;
      padding: 0;
    }
    nav ul li {
      margin-left: 20px;
    }
    nav ul li a {
      color: white;
      text-decoration: none;
      font-weight: 500;
      transition: 0.3s;
    }
    nav ul li a:hover {
      text-decoration: underline;
    }

    .container {
      max-width: 1100px;
      margin: 20px auto;
      padding: 15px;
    }

    .product-form {
      background: white;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 30px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    input, textarea, select, button {
      width: 100%;
      margin: 8px 0;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
    }
    button {
      background: #00796b;
      color: white;
      border: none;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #004d40;
    }

    .product-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 20px;
    }
    .product-card {
      background: white;
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      transition: transform 0.3s;
    }
    .product-card:hover {
      transform: translateY(-4px);
    }
    .product-card img {
      max-width: 100%;
      height: 160px;
      object-fit: cover;
      border-radius: 8px;
    }
    .product-card h3 {
      margin: 10px 0 5px;
    }
    .product-card p {
      margin: 5px 0;
    }
    .actions {
      margin-top: 12px;
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      gap: 8px;
    }
    .actions button {
      flex: 1;
      font-size: 0.9rem;
      padding: 8px;
      border-radius: 6px;
    }
    .delete-btn {
      background: crimson;
      display: none;
    }
    .edit-btn {
      background: orange;
      display: none;
    }

    footer {
      margin-top: 40px;
      text-align: center;
      padding: 15px;
      background: #00796b;
      color: white;
    }
  </style>
</head>
<body>

  <nav>
    <div class="brand">
      <img src="logo.png" alt="Delight Dental Logo">
      <h1>Delight Dental Care</h1>
    </div>
    <ul>
      <li><a href="#">Home</a></li>
      <li><a href="#">Oral Products</a></li>
      <li><a href="#">Public Discussion</a></li>
      <li><a href="#">About Us</a></li>
    </ul>
  </nav>

  <div class="container">

    <div id="adminForm" class="product-form" style="display:none;">
      <h2>Add Product</h2>
      <input type="text" id="imageUrl" placeholder="Image URL">
      <input type="text" id="name" placeholder="Product Name">
      <input type="number" id="price" placeholder="Price">
      <textarea id="description" placeholder="Description"></textarea>
      <select id="category">
        <option value="Dental Tools">Dental Tools</option>
        <option value="Whitening">Whitening</option>
        <option value="Braces">Braces</option>
        <option value="Oral Care">Oral Care</option>
        <option value="Toothpaste">Toothpaste</option>
        <option value="Mouthwash">Mouthwash</option>
        <option value="Implants">Implants</option>
        <option value="Others">Others</option>
      </select>
      <button id="addProduct">Add Product</button>
    </div>

    <h2>Available Products</h2>
    <div id="productList" class="product-list"></div>

  </div>

  <footer>
    ¬© 2025 Delight Dental Care | All Rights Reserved
  </footer>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
    import { getFirestore, collection, addDoc, deleteDoc, doc, updateDoc, increment, onSnapshot } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyD1uU1UZdioHQWF7etIZ0tmz2MkwGhmThU",
      authDomain: "delight-program.firebaseapp.com",
      projectId: "delight-program",
      storageBucket: "delight-program.appspot.com",
      messagingSenderId: "972498440796",
      appId: "1:972498440796:web:e1220bf5dd8e82b7a0cc99"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const adminForm = document.getElementById("adminForm");
    const productList = document.getElementById("productList");
    const addProductBtn = document.getElementById("addProduct");

    const ADMIN_KEY = "mubsbatir";
    let isAdmin = false;

    const enteredKey = prompt("Enter admin password (leave blank if customer):");
    if (enteredKey === ADMIN_KEY) {
      isAdmin = true;
      adminForm.style.display = "block";
      alert("‚úÖ Admin mode enabled");
    }

    // Add product
    addProductBtn.addEventListener("click", async () => {
      const imageUrl = document.getElementById("imageUrl").value;
      const name = document.getElementById("name").value;
      const price = document.getElementById("price").value;
      const description = document.getElementById("description").value;
      const category = document.getElementById("category").value;

      if (!imageUrl || !name || !price) {
        alert("‚ö†Ô∏è Please fill in all required fields");
        return;
      }

      try {
        await addDoc(collection(db, "products"), {
          imageUrl,
          name,
          price: parseFloat(price),
          description,
          category,
          likes: 0,
          createdAt: new Date()
        });
        alert("‚úÖ Product added successfully!");
      } catch (e) {
        console.error("Error adding product: ", e);
      }
    });

    // Realtime listener
    onSnapshot(collection(db, "products"), (snapshot) => {
      productList.innerHTML = "";
      snapshot.forEach((docSnap) => {
        const product = docSnap.data();
        const div = document.createElement("div");
        div.classList.add("product-card");
        div.innerHTML = `
          <img src="${product.imageUrl}" alt="${product.name}">
          <h3>${product.name}</h3>
          <p><strong>‚Ç¶${product.price}</strong></p>
          <p>${product.description}</p>
          <small>Category: ${product.category}</small>
          <div class="actions">
            <button class="like-btn">üëç Like (${product.likes || 0})</button>
            <button onclick="window.location.href='tel:+2348012345678'">üìû Call</button>
            <button onclick="window.location.href='https://wa.me/2348012345678?text=I am interested in ${product.name}'">üí¨ WhatsApp</button>
            <button class="share-btn">üîó Share</button>
            <button class="edit-btn">‚úèÔ∏è Edit</button>
            <button class="delete-btn">‚ùå Delete</button>
          </div>
        `;

        // Like
        div.querySelector(".like-btn").addEventListener("click", async () => {
          await updateDoc(doc(db, "products", docSnap.id), { likes: increment(1) });
        });

        // Share
        div.querySelector(".share-btn").addEventListener("click", async () => {
          if (navigator.share) {
            await navigator.share({
              title: product.name,
              text: `Check out this product: ${product.name} - ‚Ç¶${product.price}`,
              url: window.location.href
            });
          } else {
            navigator.clipboard.writeText(window.location.href);
            alert("üîó Link copied to clipboard!");
          }
        });

        // Admin only
        if (isAdmin) {
          const deleteBtn = div.querySelector(".delete-btn");
          const editBtn = div.querySelector(".edit-btn");
          deleteBtn.style.display = "block";
          editBtn.style.display = "block";

          // Delete
          deleteBtn.addEventListener("click", async () => {
            if (confirm("‚ùå Delete this product?")) {
              await deleteDoc(doc(db, "products", docSnap.id));
            }
          });

          // Edit
          editBtn.addEventListener("click", async () => {
            const newName = prompt("Enter new name:", product.name);
            const newPrice = prompt("Enter new price:", product.price);
            const newDesc = prompt("Enter new description:", product.description);
            const newImg = prompt("Enter new image URL:", product.imageUrl);
            const newCat = prompt("Enter new category:", product.category);

            if (newName && newPrice && newDesc && newImg && newCat) {
              await updateDoc(doc(db, "products", docSnap.id), {
                name: newName,
                price: parseFloat(newPrice),
                description: newDesc,
                imageUrl: newImg,
                category: newCat
              });
              alert("‚úÖ Product updated!");
            }
          });
        }

        productList.appendChild(div);
      });
    });
  </script>
</body>
</html>